{% extends "base.html" %}
{% load static %}

{% block content %}
<!-- Hero Banner -->
<section class="hero-section position-relative text-white text-center py-5" style="background-image: url('https://images.unsplash.com/photo-1519389950473-47ba0277781c?auto=format&fit=crop&w=1600&q=80'); background-size: cover; background-position: center;">
    <div class="overlay position-absolute top-0 start-0 w-100 h-100" style="background: rgba(0, 0, 0, 0.6);"></div>
    <div class="container position-relative" data-aos="fade-down">
        <h1 class="display-4 fw-bold">Meet Your Team</h1>
        <p class="lead mt-3">View, manage, and update your IT workers easily</p>
    </div>
</section>

<!-- Workers Table -->
<section class="py-5 bg-light">
    <div class="container">
        <!-- Top Heading and Add Button -->
        <div class="d-flex justify-content-between align-items-center mb-4" data-aos="fade-right">
            <h2 class="fw-bold">Workers</h2>
            <a href="#" class="btn btn-primary rounded-pill shadow-sm">+ Add Worker</a>
        </div>

        <!-- Table -->
        <div class="table-responsive shadow-sm rounded bg-white p-3" data-aos="fade-up">
            <table class="table table-hover align-middle mb-0">
                <thead class="table-light">
                    <tr>
                        <th scope="col">Username</th>
                        <th scope="col">First Name</th>
                        <th scope="col">Last Name</th>
                        <th scope="col">Position</th>
                        <th scope="col">Completed Tasks</th>
                        <th scope="col">Assigned Tasks</th>
                        <th scope="col" class="text-end">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for worker in worker_list %}
                    <tr data-aos="fade-up" data-aos-delay="{{ forloop.counter0|add:'1' }}00">
                        <td><a href="#" class="text-decoration-none fw-semibold">{{ worker.username }}</a></td>
                        <td>{{ worker.first_name }}</td>
                        <td>{{ worker.last_name }}</td>
                        <td>{{ worker.position.name }}</td>
                        <td><span class="badge bg-success">{{ worker.completed_tasks.count }}</span></td>
                        <td><span class="badge bg-info text-dark">{{ worker.tasks.count }}</span></td>
                        <td class="text-end">
                            <a href="#" class="btn btn-sm btn-outline-secondary me-2">Edit</a>
                            <form method="get" action="#" class="d-inline">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-sm btn-outline-danger">Delete</button>
                            </form>
                        </td>
                    </tr>
                    {% empty %}
                    <tr data-aos="fade-in">
                        <td colspan="7" class="text-center text-muted">No workers found.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<!-- AOS Animation -->
<link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
<script>
    AOS.init({
        duration: 800,
        easing: 'ease-in-out',
        once: true
    });
</script>
{% endblock %}