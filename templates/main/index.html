{% extends "base.html" %}
{% load static %}

{% block content %}
<!-- Hero with Background -->
<section class="hero-section position-relative text-white text-center py-5" style="background-image: url('https://images.unsplash.com/photo-1535223289827-42f1e9919769?auto=format&fit=crop&w=1600&q=80'); background-size: cover; background-position: center;">
    <div class="overlay position-absolute top-0 start-0 w-100 h-100" style="background: rgba(0, 0, 0, 0.6);"></div>
    <div class="container position-relative" data-aos="fade-up">
        <h1 class="display-4 fw-bold">Welcome to IT Task Manager</h1>
        <p class="lead mt-3">Manage your team, assign tasks, and streamline productivity â€” all in one place.</p>
    </div>
</section>

<!-- Stats -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row text-center g-4">
            <!-- Workers -->
            <div class="col-md-4" data-aos="fade-up">
                <div class="card border-0 shadow-sm p-4 h-100 stat-card animate__animated animate__fadeInUp">
                    <div class="icon mb-3 text-primary infinite-pulse">
                        <i class="bi bi-people-fill display-6"></i>
                    </div>
                    <h5 class="text-uppercase text-muted">Workers</h5>
                    <h2 class="display-5 fw-bold counter text-primary" data-count="{{ num_of_workers }}">0</h2>
                </div>
            </div>

            <!-- Tasks -->
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
                <div class="card border-0 shadow-sm p-4 h-100 stat-card animate__animated animate__fadeInUp">
                    <div class="icon mb-3 text-primary infinite-pulse delay-1">
                        <i class="bi bi-check2-square display-6"></i>
                    </div>
                    <h5 class="text-uppercase text-muted">Tasks</h5>
                    <h2 class="display-5 fw-bold counter text-primary" data-count="{{ num_of_tasks }}">0</h2>
                </div>
            </div>

            <!-- Positions -->
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
                <div class="card border-0 shadow-sm p-4 h-100 stat-card animate__animated animate__fadeInUp">
                    <div class="icon mb-3 text-primary infinite-pulse delay-2">
                        <i class="bi bi-diagram-3-fill display-6"></i>
                    </div>
                    <h5 class="text-uppercase text-muted">Positions</h5>
                    <h2 class="display-5 fw-bold counter text-primary" data-count="{{ num_of_positions }}">0</h2>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<!-- AOS -->
<link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
<script>
    AOS.init();
</script>

<!-- Counter JS -->
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const counters = document.querySelectorAll(".counter");

        counters.forEach(counter => {
            const animate = () => {
                const target = +counter.getAttribute('data-count');
                const count = +counter.innerText;
                const speed = 100; // smaller is faster
                const step = Math.ceil(target / speed);

                if (count < target) {
                    counter.innerText = count + step;
                    setTimeout(animate, 20);
                } else {
                    counter.innerText = target;
                }
            };
            animate();
        });
    });
</script>
{% endblock %}